{%- extends "bootstrap/base.html" %}
{% import "bootstrap/utils.html" as utils %}

{% block head %}
    {{super()}}
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta
        name="viewport"
        content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Add icon library -->
    <link
        rel="stylesheet"
        href="https://use.fontawesome.com/releases/v5.7.2/css/all.css"
        integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr"
        crossorigin="anonymous">

    <style>
        .work {
            color: greenyellow;
        }
    </style>
    {{nav.my_navbar.render()}}
{% endblock %}

{% block content %}
    <div class="container" style="margin-top:20px">
        <div class="nav nav-tabs">
            <li>
                <a href="/server_log/{{server_name}}">log</a>
            </li>
            <li class="active">
                <a href="/server_api/{{server_name}}">api</a>
            </li>
        </div>
        <h3>{{server_name}}</h3>
        <h4>apk upgrade</h4>
        <div class="alert alert-info alert-warning" role="alert" style="margin-top:20px">
            <h4>Request:</h4>
            <hr />
            <form action="{{ url_for('server_apk_upgrade') }}" id="server_apk_upgrade" method="post">
            <p style="display:none">
                {{ form_server_update_apk.server_name(value=server_name) }}
            </p>
            <table>
                <thead>
                    <tr>
                        <th>serial_no</th>
                        <th>file_name</th>
                        <th>type</th>
                        <th>url</th>
                    </tr>
                </thead>
                <tbody id='room_fileds'>
                    <tr>
                        <td>
                            <fieldset>
                                {{ form_server_update_apk.serial_number }}
                            </fieldset>
                        </td>
                        <td>
                            <fieldset>
                                {{ form_server_update_apk.file_name_text }}
                            </fieldset>
                        </td>
                        <td>
                            <fieldset>
                                {{ form_server_update_apk.type_text }}
                            </fieldset>
                        </td>
                        <td>
                            <fieldset>
                                {{ form_server_update_apk.url_text }}
                            </fieldset>
                        </td>
                    </tr>
                </tbody>
            </table>
            <input style="margin-top:10px" class="btn btn-primary mb1 bg-olive" type="button" id="more_fields" onclick="add_fields();" value="Add More" />
            <br>
            {{ form_server_update_apk.upgrade_submit(class="btn btn-primary", style="margin-top:20px") }}
            </form>
        </div>
        {% if update_resp != '' %}
        <div class="alert alert-info alert-dismissible" role="alert" style="margin-top:20px">
            <h4>Respones:</h4>
            <hr />
            <p>
                {{update_resp}}
            </p>
        </div>
        {% endif %}
    </div>
    <script>
        var count = 0
        function add_fields() {
            count++
            var county = count.toString();
            var objTo = document.getElementById('room_fileds')
            var divtest = document.createElement("tr");
            divtest.innerHTML = 
                '<td>{{ form_server_update_apk.serial_number }}</td>'+
                '<td>{{ form_server_update_apk.file_name_text }}</td>'+
                '<td>{{ form_server_update_apk.type_text }}</td>'+
                '<td>{{ form_server_update_apk.url_text }}</td>';
            objTo.appendChild(divtest)
        }
    </script>
{%- endblock %}